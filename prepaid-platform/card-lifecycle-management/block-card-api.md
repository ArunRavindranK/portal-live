---
description: >-
  "This API is used to block customer's card/wallet. The API can support 5-types
  of blocks: a) Temp b) Debit only c) Credit only d) Custom block e) Permanent
  block"
---

# Block Card API

| **Custom**      | Card will Custom Blocked (partial transactions will be allowed)                                             |
| --------------- | ----------------------------------------------------------------------------------------------------------- |
| **Temporary**   | Card will be Temporary Blocked (No transactions will be permitted)                                          |
| **Permanent**   | Card is Permanently Blocked                                                                                 |
| **Debit**       | All debits from the card will be blocked (except system debits (sourceAccountype - 11, 12, 15, 16, 41, 42)) |
| **Credit**      | All credits to the card will be blocked (except system credits (sourceAccountype - 11, 12, 15, 16, 41, 42)) |
| **CreditDebit** | All Credits and Debits will not be allowed, except system reversal credits and debits                       |

{% swagger method="post" path="" baseUrl="api/v1/blockCard" summary="" %}
{% swagger-description %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES 192 CBC.

Note - Below are the request parameters in clear text that needs to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-description %}

{% swagger-parameter in="body" name="token" type="String" required="true" %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES-192-CBC

Note - Below are the request parameters in clear text that need to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-parameter %}

{% swagger-parameter in="header" name="x-api-key" required="true" type="String" %}
Special token that the client needs to provide when making API calls. Will be shared along with access to Prepaid Platform Sandbox environment | Ex. -ABCDEF12345
{% endswagger-parameter %}

{% swagger-parameter in="body" name="messageCode" type="Numeric(4)" required="true" %}
Code to identity Block Card request API | Ex.

`1240`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="clientId" type="String(15)" required="true" %}
Uniquely identifies the Client. During program enrollment each Client is provided with a unique client id by Prepaid Aero. | Ex.

`FintechA`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="secureCode" type="String(25)" required="true" %}
Unique static parameter to uniquely identifies the client on payload level for performing operations. | Ex.

`ABCD12345`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="clientTxnId" type="String (100)" required="true" %}
Unique Id generated by the client for each API request. | Ex.

`20150701235959xhstiesqfds`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="requestDateTime " type="Numeric(14)" required="true" %}
Local Date and time stamp in YYYYMMDDHHMMSS with time in 24-hour format | Ex:

`20161031000000`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="bankId " type="Numeric(4)" required="true" %}
Uniquely identify the card issuer. Bank Id is provided by Prepaid Platform during program enrollment to uniquely identify the card issuer | Ex.

`1234`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="entityId " type="Numeric(4)" required="false" %}
Defaults to parent branch of the client i.e., 100 if not provided. This option is useful if cards need to be created and activated under a specific entity/outlet |

`100`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="customerId " type="String(20)" required="true" %}
Customer Id, which uniquely identifies the cardholder in the client system | Ex:

`IN0000000001`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="last4Digits" type="String(4)" required="true" %}
Last 4 digits of the card number | Ex:

`7810`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="urn" type="numeric(10)" required="true" %}
A unique reference number for the generated wallet | Ex:

`1000058915`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="blockType" required="true" type="string(10)" %}
To identify type of Block i.e., either its Custom, Temporary, Permanent, Debit, Credit, creditDebit
{% endswagger-parameter %}

{% swagger-parameter in="body" name="reserved1" type="string(500)" required="false" %}
Audit details for block request. This attribute is for compliance purpose.
{% endswagger-parameter %}

{% swagger-parameter in="body" name="reserved2" type="string(500)" required="false" %}
Reason for card block. This attribute is for compliance purpose.
{% endswagger-parameter %}

{% swagger-response status="200: OK" description="" %}
```javascript
{
    //Response
}
```
{% endswagger-response %}
{% endswagger %}

#### Response Body

| **messageCode**         | numeric(4)  | Mandatory | Code to Identity Block card response type                                                 | Refer to the message code reference.                                                        | 1241                      |
| ----------------------- | ----------- | --------- | ----------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- | ------------------------- |
| **clientId**            | string(15)  | Mandatory | Uniquely identifies the client.                                                           | During program enrolment each client is provided with a unique client id by Prepaid         | WIBMOCLIENT               |
| **clientTxnId**         | string(100) | Mandatory | Unique Id generated by the client for each transaction                                    | This will be the Gateway Ref ID                                                             | 20150701235959xhstiesqfds |
| **bankId**              | numeric(4)  | Mandatory | Uniquely identify the card issuer                                                         | Wibmo Prepaid will provision a pseudo bankId for the client for a close loop wallet program | 1234                      |
| **responseDateTime**    | numeric(14) | Mandatory | Local Date and time stamp when the transaction originated from the client                 | Format is YYYYMMDDHHMMSS with time in 24-hour format                                        | 20221031214559            |
| **Urn**                 | numeric(10) | Mandatory | A unique reference number for the generated wallet provided by Wibmo Prepaid.             | Value copied from the request                                                               | 1000058915                |
| **customerId**          | string(20)  | Mandatory | Customer Id, which uniquely identifies the cardholder/wallet holder in the client system. | Value copied from the request                                                               | 9as7129dhgaf657           |
| **accosaTransactionId** | numeric(10) | Mandatory | Unique id for a particular transaction generated in Prepaid                               | Unique Identifier for a transaction                                                         | 3591893                   |
| **responseCode**        | string(4)   | Mandatory | Response code of the action executed.                                                     | Contains the status of the transaction. 00 indicates success.                               | 00                        |
| **responseMessage**     | string(100) | Optional  | Description of the response code.                                                         | Response message based on response code will be sent                                        | Block successful          |
| **Description**         | string(100) | N         | Description to send to client after response                                              | Reserved field to send information to client                                                | Block card response       |
| **accosaRefNo**         | numeric(20) | Mandatory | Auto generated sequence number in CMS events                                              |                                                                                             | 4565166                   |

{% tabs %}
{% tab title="Curl" %}
<pre class="language-json"><code class="lang-json">Sample Block Card API Request
https://pp-sandbox.wibmo.com/api/v2/blockCard
Sample Request
Encrypted req->
{
"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
// Sample token. Client will have to generate this token. 
Decrypted req->
{
<strong>    "messageCode": "1240",
</strong>    "clientId": " WibmoClient",
    "clientTxnId": "CBL-458",
    "requestDateTime": "20161011221416",
    "bankId": 1234,
    "secureCode": "AfYtlO5kqdySIjXyNmGg3F",
    "entityId": 100,
    "last4Digits": "1559",
    "urn": 1000058718,
    "blockType": "CreditDebit",
    "customerId":"IN00001201001865",
    "reserved1":"Block",
    "reserved2":"mobile lost. Blocking the card"
}
</code></pre>
{% endtab %}

{% tab title="Response (Success)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
    "urn": 1000058718,
    "customerId": "IN00001201001865",
    "description": "Block",
    "responseCode": "00",
    "messageCode": "1241",
    "clientTxnId": "CBL-458",
    "clientId": "WibmoClient",
    "responseDateTime": "20161011221416",
    "accosaTransactionId": 1023,
    "responseMessage": "Success",
    "accosaRefNo": "6007283",
    "bankId": 1234
}
</code></pre>
{% endtab %}

{% tab title="Response (Failure)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
    "urn": 1000058718,
    "customerId": "IN00001201001865",
    "responseCode": "1112",
    "messageCode": "1241",
    "clientTxnId": "CBL-458",
    "clientId": "WibmoClient",
    "responseDateTime": "20161011221416",
    "accosaTransactionId": 1023,
    "responseMessage": "Invalid Block Type", 
    "bankId": 1234
}
</code></pre>
{% endtab %}
{% endtabs %}

| 00   | Success                             |
| ---- | ----------------------------------- |
| 1001 | Card not found                      |
| 1009 | Card cancelled or closed or expired |
| 1010 | Card temporary block                |
| 1011 | Card permanent block                |
| 1035 | Card not in inventory               |
| 1041 | Card not permanently blocked        |
