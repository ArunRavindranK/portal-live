---
description: >-
  This API is used to change the status of a Physical/Virtual Card issued to the
  customer in "Pre-active" State
---

# Change Card Status API

This API will change the card status of the card number of the customer. Basically, we can 'activate' the card from 'pre-active' status using the change card status API.

In case of a Physical Card, this API to be called once Customer sets PIN. In case of a Virtual only Card, then recommend calling this API once customer is successfully registered on client web portal for the cardholders. In case of wallets, recommend issuing the wallet in active state, else, same flow as Virtual only card can also be followed.

{% swagger method="post" path="" baseUrl="api/v2/changeCardStatus" summary="" %}
{% swagger-description %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES 192 CBC.

Note - Below are the request parameters in clear text that needs to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-description %}

{% swagger-parameter in="body" name="token" type="String" required="true" %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES-192-CBC

Note - Below are the request parameters in clear text that need to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-parameter %}

{% swagger-parameter in="header" name="x-api-key" required="true" type="String" %}
Special token that the client needs to provide when making API calls. Will be shared along with access to Prepaid Platform Sandbox environment | Ex. -ABCDEF12345
{% endswagger-parameter %}

{% swagger-parameter in="body" name="messageCode" type="Numeric(4)" required="true" %}
API Code to uniquely identity ‘Change Card Status’ API | Ex.

`3010`
{% endswagger-parameter %}

{% swagger-parameter in="header" name="clientId" type="String(15)" required="true" %}
Uniquely identifies the Client. During program enrollment each Client is provided with a unique client id by Prepaid Aero. | Ex.

`FintechA`
{% endswagger-parameter %}

{% swagger-parameter in="header" name="bankId " type="Numeric(4)" required="true" %}
Uniquely identify the card issuer. Bank Id is provided by Prepaid Platform during program enrollment to uniquely identify the card issuer | Ex.

`1234`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="clientTxnId" type="String (100)" required="true" %}
Unique Id generated by the client for each API request. | Ex.

`20150701235959xhstiesqfds`
{% endswagger-parameter %}

{% swagger-parameter in="header" name="entityId " type="Numeric(4)" required="false" %}
Defaults to parent branch of the client i.e., 100 if not provided. This option is useful if cards need to be created and activated under a specific entity/outlet |

`100`
{% endswagger-parameter %}

{% swagger-parameter in="header" name="secureCode" type="String(25)" required="true" %}
Unique static parameter to uniquely identifies the client on payload level for performing operations. | Ex.

`ABCD12345`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="requestDateTime " type="Numeric(14)" required="true" %}
Local Date and time stamp in YYYYMMDDHHMMSS with time in 24-hour format | Ex:

`20161031000000`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="urn" type="numeric(10)" required="true" %}
A unique reference number for the generated wallet | Ex:

`1000058915`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="cardStatus " type="string(10)" required="true" %}
New Status of the Card | Ex:

`Active`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="reason " type="string(10)" required="false" %}
This field captures the reason for change in Card Status | Ex:

`Customer Activation`
{% endswagger-parameter %}

{% swagger-response status="200: OK" description="" %}
```javascript
{
    //Response
}
```
{% endswagger-response %}
{% endswagger %}

#### Response Body

| **messageCode**         | numeric(4)  | Y | API Code to uniquely identity ‘Change Card Status’ API response type                                                                                                                                             | 3011                            |
| ----------------------- | ----------- | - | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------- |
| **clientTxnId**         | string(100) | Y | Value copied from the request                                                                                                                                                                                    | 20150701235959xhstiesqfds       |
| **responseDateTime**    | numeric(14) | Y | Response date time in the format YYYYMMDDHHMMSS with time in 24 hr format                                                                                                                                        | 20161031214559                  |
| **customerId**          | string(20)  | Y | This is the unique identifier generated by the client at their end. Incase client doesn’t provide a customer ID during the time of card/wallet creation, then Wibmo Prepaid can generate the same for the client | 9712938648                      |
| **accosaTransactionId** | numeric(10) | Y | Unique identifier of a transaction generated in Prepaid system                                                                                                                                                   | 3591893                         |
| **responseCode**        | string(4)   | Y | Contains the status of the transaction. 00 indicates success. Please refer Appendix for other response codes                                                                                                     | 00                              |
| **responseMessage**     | string(100) | N | Response message based on response code will be sent                                                                                                                                                             | ‘Successful Card Status Change’ |
| **urn**                 | numeric(10) | Y | The unique reference number for the generated card/wallet by Prepaid system                                                                                                                                      | 1000058915                      |
| **accosaRefNo**         | numeric(20) | Y | Auto generated sequence number in Prepaid cms events                                                                                                                                                             | 4565166                         |

{% tabs %}
{% tab title="Curl" %}
<pre class="language-json"><code class="lang-json">Sample Change Card Status API Request
https://pp-sandbox.wibmo.com/api/v2/changeCardStatus
Sample Request
Encrypted req->
{
"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
// Sample token. Client will have to generate this token. 
Decrypted req->
{
   "messageCode": 3010,
   "clientTxnId": "Change_R9pehQliYpmO5KP",
   "requestDateTime": "20220615123143",
<strong>   "urn": "408",
</strong>   "cardStatus": "Active"
}
</code></pre>
{% endtab %}

{% tab title="Response (Success)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
    "urn": 10709,
    "bankId": 6090,
    "clientId": "WibmoClient",
    "responseDateTime": "20221116124700",
    "accosaRefNo": "1096",
    "clientTxnId": "Change_xOCmoy8czwu5AW5",
    "accosaTransactionId": 5152,
    "customerId": "10709",
    "messageCode": 3011,
    "responseMessage": "SUCCESS",
    "responseCode": "00"
}
</code></pre>
{% endtab %}

{% tab title="Response (Failure)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
    "urn": 408,
    "bankId": 2010,
    "clientId": "WibmoClient",
    "responseDateTime": "20221116123730",
    "clientTxnId": "Change_R9pehQliYpmO5KP",
    "accosaTransactionId": 7490,
    "customerId": "custid_V3_xPL4SdIlUd",
    "messageCode": 3011,
    "responseMessage": "CARD ALREADY ACTIVATED",
    "responseCode": "1004"
}
</code></pre>
{% endtab %}
{% endtabs %}

| 1055 | MALFORMED\_REQUEST                              |
| ---- | ----------------------------------------------- |
| 1001 | CARD\_NOT\_FOUND                                |
| 1084 | CARD\_CUSTOMER\_ID\_MISMATCH                    |
| 1085 | PRODUCT NOT ALLOWED                             |
| 1052 | SYSTEM\_ERROR                                   |
| 1032 | INVALID\_CLIENT\_CHANNEL                        |
| 1081 | OPERATION NOT ALLOWED                           |
| 1292 | CARD\_STATUS\_CANNOT\_BE\_BLANK                 |
| 1293 | INVAILD\_CARD\_STATUS                           |
| 1080 | IP\_NOT\_ALLOWED                                |
| 1049 | INVALID SECURE CODE                             |
| 1051 | CHECKSUM FAILURE                                |
| 1093 | INVALID CLIENT TXN ID                           |
| 1320 | REQUEST\_DATETIME\_IS\_MANDATORY                |
| 1031 | INVALID BANK ID                                 |
| 1264 | BANK ID NOT PRESENT                             |
| 1262 | CLIENT ID NOT PRESENT                           |
| 1310 | XCONSUMERKEY NOT PRESENT                        |
| 1058 | INVALID WALLETS                                 |
| 1030 | INVALID MESSAGE                                 |
| 1311 | SECURE CODE NOT PRESENT                         |
| 1303 | CUSTOMER DETAILS NOT PRESENT                    |
| 1088 | INVALID DATE FORMAT                             |
| 1302 | INVALID\_CUSTOMER                               |
| 1009 | CARD CANCELLED CLOSED EXPIRED                   |
| 1010 | CARD\_TEMPORARY\_BLOCK                          |
| 1131 | CARD\_CUSTOM\_BLOCK                             |
| 1011 | CARD\_PERMANENT\_BLOCK                          |
| 1012 | CARD\_PENDING\_CANCELLATION                     |
| 1118 | CARD\_CREDIT\_BLOCK                             |
| 1121 | CARD\_CREDIT\_DEBIT\_BLOCK                      |
| 1004 | CARD\_ALREADY\_ACTIVATED                        |
| 133  | CHANGE\_CARD\_STATUS\_REQUEST\_IS\_NOT\_ELGIBLE |
