---
description: This section provides the required details for integrating the iOS SDK
---

# iOS

## Step 1: SDK and dependencies &#x20;

Include .framework library into the project \
&#x20;     Name : MarketPlaceSDK.framework&#x20;

&#x20;General -> Frameworks -> Embed\&Sign&#x20;

## Step 2: Get client public key

Invoke the SDK to get the client public key&#x20;

{% code overflow="wrap" %}
```swift

Invoke the SDK to get the Client Public key 
Import “MarketPlaceSDK” 

let bridge = WFSDKBridge() 

bridge.onCertificateFetch { (publicKey, status) in 
    //Will return client public key and true status if success or false status if public key could not be generated by SDK 
  } 
```
{% endcode %}

## Step 3: Initialisation of SDK&#x20;



Fetch the token data from your server by passing the sdkPublicKey received at step 2.

Create a JSON object from the response received. &#x20;



{% code overflow="wrap" %}
```swift
// Example to create a JSON Object
let jsonObject: [String: Any] = [  
" referenceId ": “”, 
" token ": “”, 
" expiry ": ””, 
"serverPublicKey ": “” 
] 
let valid = JSONSerialization.isValidJSONObject(jsonObject) // true  
let jsonData: NSData 
    do{ 
        jsonData = try NSJSONSerialization.dataWithJSONObject(para, options: NSJSONWritingOptions())  
    } catch _ { 
            print ("Oops!") 
    } 
    // JSON Data created = jsonData
```
{% endcode %}

Invoke the SDK by providing the JSON Object constructed in the previous step along with PartnerCode shared offline and the environment mode.&#x20;

{% code overflow="wrap" %}
```swift
String partnerCode = <Data will be shared offine>; 
String envMode = “UAT”; //”UAT”, “PROD” 
String healthCheckSpanTime = 1800; //Optional, TimeInMilliSec             
//Method to initilise SDK
  bridge.initializeSDK(tokenObj: <#T##Data#>, partnerCode: <#T##String#>, envt: <#T##String#>, healthCheckFrequency: <#T##Double#>)
   
```
{% endcode %}

Confirm to a protocol named WFCallbackHandler, which contains the following stubs: &#x20;

&#x20;**onSDKInitialisationComplete** – When SDK is initialised successfully&#x20;

**onSDKInitialisationFailed** – When SDK initialisation fails&#x20;

**onTokenExpired** – When token is expired in SDK&#x20;

**receiveWibmoHealthCheck** – Heartbeat call back with status \[To intimate the app if the user in active]

**onSDKProcessComplete** – When user exits out of Market place SDK back to Parent App&#x20;

<pre class="language-swift" data-overflow="wrap"><code class="lang-swift">extension ViewController:WFCallbackHandler { 
  func onSDKInitialisationFailed(status: WFStatus) { 
    //Callback received if the initialization failed and control will be given back to the app.  
   } 
  func onSDKInitialisationComplete(status: WFStatus) { 
<strong>    //Callback received if the initialization is success and user will be navigated to the Marketplace dashboard 
</strong>  } 
  func onTokenExpired() { 
    // Callback received when the token provided has expired.  
  } 
 func receiveWibmoHealthCheck(status: WFStatus) { 
    // Callback received at regular interval based on healthCheckFrequency provided, else will be invoked at the default time which is 30 seconds configured in the SDK.  
  } 
  func onSDKProcessComplete(statusCode: String, statusDesc: String) { 
     // Callback received either when user intentionally navigates out from the SDK or when the SDK forcefully quits based on any technical error.        
} 
} 
</code></pre>

## &#x20;Get merchant list

To fetch the list of merchants fetch the token data from your server by passing the sdkPublicKey received at Step 2

Invoke the SDK by providing the JSON Object constructed in the previous step along with PartnerCode shared offline, the environment mode and health check span time to invoke the SDK follow Step 3.



{% code overflow="wrap" fullWidth="false" %}
```swift
@objc public func getMerchantList(tokenObj: Data,
                                partnerCode: String,,
                                environment: String,,
                                healthCheckFrequency: Double,,
                                completionHandler: @escaping: [[St(((ng:(merchantDataJson: [[ String: String]] -> Void){ }
```
{% endcode %}

## Load selected merchant

{% code overflow="wrap" %}
```swift
@objc public func didSelectMerchant(merchantCode: String,  controller: UINavigationController))
```
{% endcode %}

## SDK Status code & Description

* “000” - Success&#x20;
* “050” - Technical Error. Please retry.&#x20;
