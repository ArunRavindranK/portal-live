---
description: This API is used to transfer funds between Wibmo wallets
---

# Fund Transfer API

Fund Transfer API is called by the client to transfer funds between participants. Currently fund transfer is allowed only between Wibmo wallets.

If the call is unsuccessful, there will not be any changes either the **Sender** Wallets or the **Beneficiary** Wallets (i.e., atomic transaction). Transfer amount should be zero sum i.e., Sum of amount debited from the sender's accounts should be equal to the sum of amount credited to the receiver's account. This is a costly operation, so timeouts on this call should be higher, errorFlag will indicates the transaction Response.

{% swagger method="post" path="" baseUrl="api/v1/fundTransfer" summary="" %}
{% swagger-description %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES 192 CBC.

Note - Below are the request parameters in clear text that needs to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-description %}

{% swagger-parameter in="body" name="token" type="String" required="true" %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES-192-CBC

Note - Below are the request parameters in clear text that need to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-parameter %}

{% swagger-parameter in="header" name="x-api-key" required="true" type="String" %}
Special token that the client needs to provide when making API calls. Will be shared along with access to Prepaid Platform Sandbox environment | Ex. -ABCDEF12345
{% endswagger-parameter %}

{% swagger-parameter in="body" name="messageCode" type="Numeric(4)" required="true" %}
Code to identity fund transfer request API | Ex.

`1680`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="clientId" type="String(15)" required="true" %}
Uniquely identifies the Client. During program enrollment each Client is provided with a unique client id by Prepaid Aero. | Ex.

`FintechA`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="secureCode" type="String(25)" required="true" %}
Unique static parameter to uniquely identifies the client on payload level for performing operations. | Ex.

`ABCD12345`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="clientTxnId" type="String (100)" required="true" %}
Unique Id generated by the client for each API request. | Ex.

`20150701235959xhstiesqfds`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="requestDateTime " type="Numeric(14)" required="true" %}
Local Date and time stamp when the transaction originated from the client in YYYYMMDDHHMMSS with time in 24-hour format | Ex:

`20161031000000`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="bankId " type="Numeric(4)" required="true" %}
Uniquely identify the card issuer. Bank Id is provided by Prepaid Platform during program enrollment to uniquely identify the card issuer | Ex.

`1234`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="entityId " type="Numeric(4)" required="false" %}
Defaults to parent branch of the client i.e., 100 if not provided. This option is useful if cards need to be created and activated under a specific entity/outlet |

`100`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.customerId" type="String(20)" required="true" %}
Customer Id, which uniquely identifies the sender cardholder in the client system | Ex.

`IN2016201611`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.last4Digits" type="string(4)" required="true" %}
Last 4 digits of the sender card number | Ex:

`7810`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.urn" type="numeric(10)" required="true" %}
A unique reference number for the generated wallet | Ex:

`1000058915`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.transactionAmount" type="Numeric(12)" required="true" %}
Funds to be transferred from the sender. It is in implied decimals | Ex:

`100`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.sourceAccountType" type="Numeric(2)" required="false" %}
Source account type is the account type from which funding of prepaid account will happen. | Ex.

`Wallet/Account`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.sourceAccount" type="String(30)" required="false" %}
Source account is the account from which funding is happening | Ex.

`00112233445566`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.reserved1" type="string(500)" required="false" %}
Used to store the file related information for this request | Ex:

`201607040918424092qE93qKGGE3456.csv`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.reserved2" type="string(500)" required="false" %}
Reserve field | Ex:

`I|10203`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.reserved3" type="string(500)" required="false" %}
Used to store fundFlowType for request | Ex:

`0`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.reserved4" type="string(500)" required="false" %}
Used to store the clientEventId for this request | Ex:

`I|10003`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="sender.reserved5" type="string(500)" required="false" %}
Used to store the clientTRNDescription for the request | Ex:

`PG Load`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="receiver.customerId" type="string(20)" required="true" %}
Customer Id, which uniquely identifies the receiver cardholder in the client system | Ex.

`IN2016201611`
{% endswagger-parameter %}

{% swagger-parameter in="body" required="true" name="receiver.last4Digits" type="string(4)" %}
Last 4 digits of the sender card number | Ex:

`7810`
{% endswagger-parameter %}

{% swagger-parameter in="body" required="true" name="receiver.urn" type="numeric(10)" %}
A unique reference number for the generated wallet | Ex:

`1000058915`
{% endswagger-parameter %}

{% swagger-parameter in="body" required="true" name="receiver.transactionAmount	" type="numeric(12)	" %}
Funds to be transferred to the receiver. It is in implied decimals | Ex:

`100`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="receiver.reserved1" type="string(500)" required="false" %}
Used to store the file related information for this request | Ex:

`201607040918424092qE93qKGGE3456.csv`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="receiver.reserved2" type="string(500)" required="false" %}
Reserve field | Ex:

`I|10203`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="receiver.reserved3" type="string(500)" required="false" %}
Used to store fundFlowType for request | Ex:

`0`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="receiver.reserved4" type="string(500)" required="false" %}
Used to store the clientEventId for this request | Ex:

`I|10003`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="receiver.reserved5" type="string(500)" required="false" %}
Used to store the clientTRNDescription for the request | Ex:

`PG Load`
{% endswagger-parameter %}

{% swagger-response status="200: OK" description="" %}
```javascript
{
    //Response
}
```
{% endswagger-response %}
{% endswagger %}

#### Response Body

| **messageCode**                | numeric(4)  | Y         | Code to Identity fund transfer API response type                                                   | Refer to the message code reference.                                                                                                                        | 1681                      |
| ------------------------------ | ----------- | --------- | -------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------- |
| **clientTxnId**                | string(100) | Y         | Unique Id generated by the client for each transaction.                                            | Value copied from the request                                                                                                                               | 20150701235959xhstiesqfds |
| **responseDateTime**           | numeric(14) | Y         | Response date and timestamp when the transaction originated from the client                        | Format is YYYYMMDDHHMMSS with time in 24-hour format                                                                                                        | 20161031214559            |
| **customerId**                 | string(20)  | Y         | Unique customer identifier that is generated by the client                                         | This is fetched from Wibmo Prepaid basis customerâ€™s mobile. no                                                                                              | 9712938648                |
| **urn**                        | numeric(10) | Mandatory | A unique reference number for the generated card.                                                  | Unique identifier for card/wallet                                                                                                                           | 1000058915                |
| **accosaTransactionId**        | numeric(10) | Y         | Unique id for a particular transaction generated in Prepaid system                                 | Unique Identifier for a transaction                                                                                                                         | 3591893                   |
| **responseCode**               | string(4)   | Y         | Response code of the action executed.                                                              | Contains the status of the transaction. 00 indicates success.                                                                                               | 00                        |
| **responseMessage**            | string(100) | N         | Description of the response code.                                                                  | Response message based on response code will be sent                                                                                                        | load successful           |
| **description**                | string(100) | N         | Reserved field to send information to client                                                       | Any additional info can be passed                                                                                                                           | 'Fund Transfer'           |
| **transactionAmount**          | numeric(12) | Mandatory | Load/Unload Amount passed with implied decimals.                                                   | It is in implied decimals by two digits. Ex. if amount is INR 5.50, then implied decimal is 550. If the amount is INR 3, then implied decimal is 300        | 210000                    |
| **errorFlag**                  | numeric(1)  | Y         | This flag will indicate the status of the transaction                                              | <p>errorFlag = 0 - Sender failure,</p><p>errorFlag = 1 - Reciever failure,</p><p>errorFlag = 2 - Success, errorFlag = 3 - Unknown or exceptional status</p> | 0                         |
| **availableBalance**           | numeric(12) | Mandatory | Available Balance in the wallet after successful reload/unload.                                    | It is in implied decimals by two digits. Ex. if amount is INR 5.50, then implied decimal is 550. If the amount is INR 3, then implied decimal is 300        | 210000                    |
| **availableCashLimit**         | numeric(12) | Mandatory | Available Cash Limit on the card                                                                   | Cash Limit available within available balance                                                                                                               | 110000                    |
| **accosaRefNo**                | numeric(20) | Mandatory | Auto generated sequence number in CMS events                                                       |                                                                                                                                                             | 4565166                   |
| **sender.customerId**          | string(20)  | Y         | Customer Id, which uniquely identifies the sender cardholder/wallet holder in the client system.   | Client can send this request basis mobile OR custoAvailable Balance in the customers accountmer ID OR urn                                                   | IN2016201611              |
| **sender.urn**                 | numeric(10) | Y         | A unique reference number for the generated wallet provided by Wibmo Prepaid.                      | Unique identifier for the card for sender                                                                                                                   | 1000058915                |
| **sender.accosaRefNo**         | numeric(20  | N         | Auto generated sequence number in cms events for sender                                            |                                                                                                                                                             | 4565166                   |
| **sender.availableBalance**    | numeric(20  | N         | Available Balance in the customer's account                                                        | It is in implied decimals                                                                                                                                   | 100000                    |
| **sender.transactionAmount**   | numeric(20  | N         | transaction Amount                                                                                 | It is in implied decimals                                                                                                                                   | 100000                    |
| **receiver.customerId**        | string(20)  | Y         | Customer Id, which uniquely identifies the receiver cardholder/wallet holder in the client system. | Client can send this request basis mobile OR custoAvailable Balance in the customers accountmer ID OR urn                                                   | IN2016201611              |
| **receiver.urn**               | numeric(10) | Y         | A unique reference number for the generated wallet provided by Wibmo Prepaid.                      | Unique identifier for the card for receiver                                                                                                                 | 1000058915                |
| **receiver.accosaRefNo**       | numeric(20  | Y         | Auto generated sequence number in cms events for sender                                            |                                                                                                                                                             | 4565167                   |
| **receiver.availableBalance**  | numeric(20  | N         | Available Balance in the customer's account                                                        | It is in implied decimals                                                                                                                                   | 900000                    |
| **receiver.transactionAmount** | numeric(20  | N         | transaction Amount                                                                                 | It is in implied decimals                                                                                                                                   | 100000                    |

{% tabs %}
{% tab title="Curl" %}
```json
Sample Fund Transfer API Request
https://pp-sandbox.wibmo.com/api/v1/fundTransfer
Sample Request
Encrypted req->
{
"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
// Sample token. Client will have to generate this token. 
Decrypted req->
{
   "messageCode": "1680",
   "clientId": "WibmoClient",
   "clientTxnId": "Acti_V3_BoMz3FurI9",
   "requestDateTime": "20221116012733",
   "bankId": "2010",
   "secureCode": "AfZtpO5krtySIhXyNmGg1G",
   "entityId": "100",
   "senders": [
       {
           "last4Digits": "6894",
           "urn": 408,
           "customerId": "custid_V3_xPL4SdIlUd",
           "transactionAmount": "200",
           "sourceAccountType": 1,
           "sourceAccount": "1234",
           "reserved1": "sender",
           "reserved2": "sdf",
           "reserved3": "O|10009",
           "reserved4": "PG Load",
           "reserved5": "201607040918K4"
       }
   ],
   "receivers": [
       {
           "last4Digits": "2281",
           "urn": 409,
           "customerId": "custid_V3_YcR8NRqEM2",
           "transactionAmount": "200",
           "reserved1": "receiver",
           "reserved2": "sdf",
           "reserved3": "O|10009",
           "reserved4": "PG Load",
           "reserved5": "2016aasd07040918"
       }
   ]
 }
```
{% endtab %}

{% tab title="Response (Success)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
    "clientId": "WibmoClient",
    "responseDateTime": "20221116132808",
    "accosaTransactionId": 7497,
    "errorFlag": 2,
    "responseCode": "00",
    "urn": 408,
    "bankId": 2010,
    "receivers": [
        {
            "urn": 409,
            "accosaRefNo": 788,
            "transactionAmount": 200,
            "customerId": "custid_V3_YcR8NRqEM2",
            "availableBalance": 100200
        }
    ],
    "clientTxnId": "Acti_V3_BoMz3FurI9",
    "transactionAmount": 200,
    "customerId": "custid_V3_xPL4SdIlUd",
    "messageCode": 1681,
    "responseMessage": "SUCCESS",
    "senders": [
        {
            "urn": 408,
            "accosaRefNo": 787,
            "transactionAmount": 200,
            "customerId": "custid_V3_xPL4SdIlUd",
            "availableBalance": 99800
        }
    ]
}
</code></pre>
{% endtab %}

{% tab title="Response (Failure)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
    "urn": 408,
    "bankId": 2010,
    "clientId": "WibmoClient",
    "responseDateTime": "20221116132922",
    "clientTxnId": "Acti_V3_1gk7SHikGW",
    "accosaTransactionId": 7498,
    "customerId": "custid_V3_xPL4SdIlUd",
    "messageCode": 1681,
    "responseMessage": "TRANSACTION AMOUNT MISMATCH",
    "responseCode": "1104"
}
</code></pre>
{% endtab %}
{% endtabs %}
