---
description: >-
  This API is used to find the permissible reload limit on the cad/wallet. This
  API shares both the 'Available Balance' & 'Available AML Limit' for the card
  or wallet holder
---

# AML Inquiry API

AML Inquiry API is called by the client to fetch the AML limits for the customers on a card. The AML Limit details of the card is fetched and sent to the client.

{% swagger method="post" path="" baseUrl="api/v1/amlInquiry" summary="" %}
{% swagger-description %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES 192 CBC.

Note - Below are the request parameters in clear text that needs to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-description %}

{% swagger-parameter in="body" name="token" type="String" required="true" %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES-192-CBC

Note - Below are the request parameters in clear text that need to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-parameter %}

{% swagger-parameter in="header" name="x-api-key" required="true" type="String" %}
Special token that the client needs to provide when making API calls. Will be shared along with access to Prepaid Platform Sandbox environment | Ex. -ABCDEF12345
{% endswagger-parameter %}

{% swagger-parameter in="body" name="messageCode" type="Numeric(4)" required="true" %}
API Code to uniquely identity ‘Verify Cardholder’ API | Ex.

`1550`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="clientId" type="String(15)" required="true" %}
Uniquely identifies the Client. During program enrollment each Client is provided with a unique client id by Prepaid Aero. | Ex.

`FintechA`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="secureCode" type="String(25)" required="true" %}
Unique static parameter to uniquely identifies the client on payload level for performing operations. | Ex.

`ABCD12345`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="clientTxnId" type="String (100)" required="true" %}
Unique Id generated by the client for each API request. | Ex.

`20150701235959xhstiesqfds`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="requestDateTime " type="Numeric(14)" required="true" %}
Local Date and time stamp in YYYYMMDDHHMMSS with time in 24-hour format | Ex:

`20161031000000`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="bankId " type="Numeric(4)" required="true" %}
Uniquely identify the card issuer. Bank Id is provided by Prepaid Platform during program enrollment to uniquely identify the card issuer | Ex.

`1234`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="customerId " type="string(20) " required="true" %}
Uniquely identifies the cardholder in the client system | Ex:

`91xxxxxxxx`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="last4digits " type="numeric(4) " required="true" %}
Last 4 digit of the customer card number | Ex:

`3781`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="urn" type="numeric(10)" required="true" %}
A unique reference number for the generated wallet | Ex:

`1000058915`
{% endswagger-parameter %}

{% swagger-response status="200: OK" description="" %}
```javascript
{
    //Response
}
```
{% endswagger-response %}
{% endswagger %}

#### Response Body

| **messageCode**                   | numeric(4)  | Y | Message code for statement inquiry response                                                                  | 1551                      |
| --------------------------------- | ----------- | - | ------------------------------------------------------------------------------------------------------------ | ------------------------- |
| **clientId**                      | string(15)  | Y | Value copied from the request                                                                                | WIBMOBANK                 |
| **clientTxnId**                   | string(100) | Y | Value copied from the request                                                                                | 20150701235959xhstiesqfds |
| **bankId**                        | numeric(4)  | Y | Value copied from the request                                                                                | 1234                      |
| **responseDateTime**              | numeric(14) | Y | Response date time in the format YYYYMMDDHHMMSS with time in 24 hr format                                    | 20161031214559            |
| **Urn**                           | numeric(10) | Y | A unique reference number for the card(urn)                                                                  | 1000058915                |
| **customerId**                    | string(20)  | Y | Value copied from the request                                                                                | IN2016201611              |
| **accosaTransactionId**           | numeric(10) | Y | Unique id for a particular transaction generated in Prepaid                                                  | 3591893                   |
| **responseCode**                  | string(4)   | Y | Contains the status of the transaction. 00 indicates success. Please refer Appendix for other response codes | 00                        |
| **responseMessage**               | string(100) | N | Response message based on response code will be sent                                                         |                           |
| **Description**                   | string(100) | N | Reserved field to send information to client                                                                 |                           |
| **availableBalance**              | numeric(12) | Y | Card available balance (implied decimals)                                                                    | 19000                     |
| **availableYearlyAmlDebitLimit**  | numeric(12) | Y | Not Applicable                                                                                               | 15000                     |
| **lastActivityTimeStamp**         | string(50)  | Y | When the last time AML is updated                                                                            | 2022-06-07 13:06:03.941   |
| **availableMonthlyAmlDebitLimit** | Numeric(12) | N | Not Applicable                                                                                               | 130000                    |
| **availableMonthlyAmlLimit**      | Numeric(12) | Y | Max amount that can be loaded in wallet in a month                                                           | 10000000                  |
| **availableAmlLimit**             | Numeric(12) | Y | max amount that can be present on a card                                                                     | 10000000                  |
| **availableDailyAmlDebitLimit**   | Numeric(12  | N | Not Applicable                                                                                               | 110000                    |
| **availableDailyAmlLimit**        | Numeric(12) | Y | Max amount that can be loaded in wallet in a day                                                             | 10000000                  |
| **availableYearlyAmlLimit**       | Numeric(12) | Y | Max amount that can be loaded in wallet in a year                                                            | 100000000                 |
| **availableDailySpendLimit**      | Numeric(12) | Y | Maximum spend limit in a day                                                                                 | 990000                    |
| **availableSpendLimit**           | Numeric(12) | Y | Maximum spend limit                                                                                          | 990000                    |
| **availableYearlySpendLimit**     | Numeric(12) | Y | Maximum spend limit in a year                                                                                | 9990000                   |
| **availableMonthlySpendLimit**    | Numeric(12) | Y | Maximum spend limit in a day                                                                                 | 990000                    |
| **cardStatus**                    | Numeric(2)  | Y | Status of the card – active or inactive                                                                      | 0                         |

{% tabs %}
{% tab title="Curl" %}
<pre class="language-json"><code class="lang-json">Sample AML Inquiry API Request
https://pp-sandbox.wibmo.com/api/v1/amlInquiry
Sample Request
Encrypted req->
{
"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
// Sample token. Client will have to generate this token. 
Decrypted req-> 
{ 
    "messageCode": 1550,
    "clientId": "WibmoClient",
    "secureCode": "AfZtpO5kqdtSIhXyNmGg1G",
    "clientTxnId": "Sam_AML_A7tLf",
<strong>    "requestDateTime": "20221116122346",
</strong>    "bankId": 2010,
    "last4Digits": "2282",
    "urn": "400",
    "customerId": "RONfJdOcvX"
} 

</code></pre>
{% endtab %}

{% tab title="Response (Success)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
<strong>    "responseDateTime": "20221116122420",
</strong>    "availableYearlyAmlDebitLimit": 0,
    "accosaTransactionId": 0,
    "description": "Active",
    "lastActivityTimeStamp": "2022-11-16 06:54:20.0",
    "availableMonthlyAmlDebitLimit": 0,
    "availableDailySpendLimit": 1000000,
    "responseCode": "00",
    "availableBalance": "100000",
    "availableSpendLimit": 1000000,
    "clientTxnId": "Sam_AML_A7tLf",
    "customerId": "RONfJdOcvX",
    "availableYearlySpendLimit": 10000000,
    "availableDailyAmlLimit": 1000000,
    "availableYearlyAmlLimit": 10000000,
    "availableMonthlySpendLimit": 1000000,
    "cardStatus": "0",
    "clientId": "WibmoClient",
    "availableMonthlyAmlLimit": 1000000,
    "urn": 400,
    "bankId": 2010,
    "availableAmlLimit": 900000,
    "availableDailyAmlDebitLimit": 0,
    "messageCode": 1551,
    "responseMessage": "SUCCESS"
}
</code></pre>
{% endtab %}

{% tab title="Response (Failure)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
    "urn": 123,
    "bankId": 2010,
    "clientId": "WibmoClient",
    "responseDateTime": "20221116123033",
    "clientTxnId": "Sam_AML_A7tLf",
    "accosaTransactionId": 0,
    "customerId": "kxwhV3WXFC",
    "messageCode": 1551,
    "responseMessage": "URN AND LAST 4 DIGITS MISMATCH",
    "responseCode": "1083"
}
</code></pre>
{% endtab %}
{% endtabs %}
