---
description: >-
  This API can be called to showcase customer wallet details and profile details
  on Program Web Portal Home Page or subsequent pages
---

# Retrieve Cust Record API

This API will be called to register a new customer for a wallet program. This API will check if customer’s mobile number exists in the system. Only if it doesn’t, will it call Wibmo internal OTP service to trigger OTP to this new customer’s mobile number. This API is part of Wibmo Prepaid’s Login micro-service. Hence, the Header of this API and other Prepaid wallet related APIs will differ.

{% swagger method="post" path="" baseUrl="api/v2/customer/retrieveCustRecord" summary="" %}
{% swagger-description %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES 192 CBC.

Note - Below are the request parameters in clear text that needs to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-description %}

{% swagger-parameter in="body" name="token" type="String" required="true" %}
Request body will contain the encrypted token. Encryption will be done by the client using the client key provided by Wibmo Team. Encryption/ Decryption methodology - AES-192-CBC

Note - Below are the request parameters in clear text that need to be encrypted by the client. The below parameters should not be shared in clear text.
{% endswagger-parameter %}

{% swagger-parameter in="header" name="x-api-key" required="true" type="String" %}
Special token that the client needs to provide when making API calls. Will be shared along with access to Prepaid Platform Sandbox environment | Ex. -ABCDEF12345
{% endswagger-parameter %}

{% swagger-parameter in="body" name="messageCode" type="Numeric(4)" required="true" %}
Code to identity retrieve cust record request API | Ex.

`1930`
{% endswagger-parameter %}

{% swagger-parameter in="header" name="clientId" type="String(15)" required="true" %}
Uniquely identifies the Client. During program enrollment each Client is provided with a unique client id by Prepaid Aero. | Ex.

`FintechA`
{% endswagger-parameter %}

{% swagger-parameter in="header" name="bankId" type="Numeric(4)" required="true" %}
Uniquely identify the card issuer. Bank Id is provided by Prepaid Platform during program enrollment to uniquely identify the card issuer | Ex.

`1234`
{% endswagger-parameter %}

{% swagger-parameter in="header" name="entityId" type="numeric(4)" required="false" %}
Defaults to parent branch of the client i.e., 100 if not provided. This option is useful if cards need to be created and activated under a specific entity/outlet |

`100`
{% endswagger-parameter %}

{% swagger-parameter in="header" name="secureCode" type="string(25)" required="true" %}
Unique static parameter to uniquely identifies the client on payload level for performing operations. | Ex.

`ABCD12345`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="clientTxnId" type="String (10)" required="true" %}
Unique Id generated by the client for each API request. | Ex.

`20150701235959xhstiesqfds`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="requestDateTime" type="Numeric(14)" required="true" %}
Local Date and time stamp when the transaction originated from the client in YYYYMMDDHHMMSS with time in 24-hour format
{% endswagger-parameter %}

{% swagger-parameter in="body" name="customerMobile" type="numeric(20)" required="false" %}
<mark style="background-color:purple;">This is a conditional field.</mark>

Mobile number of the cardholder | Ex:

`9897123456`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="customerId " type="String(20)" required="false" %}
<mark style="background-color:purple;">This is a conditional field.</mark>

Uniquely identifies the cardholder in the client system | Ex.

`IN0000000001`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="emailId" type="String(50)" required="false" %}
<mark style="background-color:purple;">This is a conditional field.</mark>

Email Address of the cardholder | Ex.

`aayush.goel@abc.com`
{% endswagger-parameter %}

{% swagger-parameter in="body" name="urn" type="numeric(10)" required="false" %}
<mark style="background-color:purple;">This is a conditional field.</mark>

A unique reference number for the generated wallet | Ex: 1000058915
{% endswagger-parameter %}

{% swagger-response status="200: OK" description="" %}
```javascript
{
    //Response
}
```
{% endswagger-response %}
{% endswagger %}

#### Response Body

| **description**         | String(100)  | optional  | Description to be sent to client                                                     | Reserved field to send information to client                                                                                                                                         | Customer profile found                                           |
| ----------------------- | ------------ | --------- | ------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------- |
| **responseCode**        | String(4)    | Mandatory | Response code of the action executed.                                                | Contains the status of the transaction. 00 indicates success.                                                                                                                        | 00                                                               |
| **messageCode**         | Numeric(4)   | Mandatory | Code to Identify the retrieve cust record response type API                          | Refer to the message code reference.                                                                                                                                                 | 1931                                                             |
| **clientTxnId**         | String(100)  | Mandatory | Unique Id generated by the client for each transaction                               | Value copied from the request                                                                                                                                                        | 20150701235959xhstiesqfds                                        |
| **responseDateTime**    | numeric(14)  | Mandatory | Response date and timestamp when the transaction originated from the client          | Format is YYYYMMDDHHMMSS with time in 24-hour format                                                                                                                                 | 20161031214559                                                   |
| **accosaTransactionID** | Numeric(10)  | Mandatory | Unique id for a particular transaction generated in Prepaid                          | Unique Identifier for a transaction                                                                                                                                                  | 3591893                                                          |
| **responseMessage**     | String(100)  | Optional  | Description of the response code.                                                    | Response message based on response code will be sent                                                                                                                                 |                                                                  |
| **bankId**              | Numeric(4)   | Mandatory | Uniquely identify the card issuer                                                    | Bank Id is provided by Prepaid Aero during program enrolment to uniquely identify the card issuer                                                                                    | 1234                                                             |
| **mobile**              | Numeric(20)  | Mandatory | Mobile number of the cardholder                                                      | Card Holder Mobile number will be provided by customer                                                                                                                               | 9897123456                                                       |
| **firstName**           | String(50)   | optional  | First Name of the cardholder/wallet holder                                           | Provided by customer                                                                                                                                                                 | ABC                                                              |
| **lastName**            | String(50/)  | optional  | Last Name of the cardholder/wallet holder                                            | Provided by customer                                                                                                                                                                 | XYZ                                                              |
| **dob**                 | Numeric(8)   | optional  | Date of Birth of the Customer                                                        | Provided by customer in YYYYMMDD format                                                                                                                                              | 19931114                                                         |
| **updatedOn**           | Numeric(14)  | Mandatory | Local Date and time stamp of when the card/wallet profile got updated most recently. | Format is DD-MM-YYYY with 24-hour format                                                                                                                                             | 11-11-2022                                                       |
| **reKyc**               | Boolean      | Mandatory | ReKyc status of the user                                                             | <p>True- Eligible for reKyc<br>False- reKyc Not required</p>                                                                                                                         | True                                                             |
| **docType**             | string(20)   | Mandatory | Document Type of the Cardholder                                                      | One Card Holder can have many Documents.                                                                                                                                             | Aadhar\*, PAN card, Voter ID, Driver License, Passport, job card |
| **docCountry**          | String(20)   | Mandatory | The Country Name On which document is issued                                         | Country name of OVD.                                                                                                                                                                 | India, U.S, Argentina                                            |
| **docExpiry**           | numeric(8)   | Optional  | The Expiry Time for Document                                                         | Required in case of Full KYC. Format is YYYYMMDD.                                                                                                                                    | 20231201                                                         |
| **docNumber**           | string(20)   | Mandatory | Document Number of the chosen doc type                                               | OVD No. like Aadhar Number, Pan card Number need to be passed.                                                                                                                       | 3675 9834 6015                                                   |
| **cKycDocNo**           | numeric(120) | Optional  | This is the CKYC No for the user                                                     | <mark style="background-color:purple;">This is a conditional field.</mark> This is only mandatory if the KYC is Aadhar based e-KYC where the CKYC no. of the customer will be shared | 123456                                                           |
| **docConsent**          | boolean      | Optional  | The consent of the card holder                                                       | <mark style="background-color:purple;">This is a conditional field.</mark> In Case of Adhar validation of Full KYC user consent is required.                                         | true/false                                                       |
| **createdOn**           | Numeric(14)  | Mandatory | Local Date and time stamp of when the card/wallet profile got created.               | Format is DD-MM-YYYY with 24-hour format                                                                                                                                             | 11-11-2022                                                       |
| **Urn**                 | Numeric(10)  | Mandatory | A unique reference number for the card generated by Prepaid system.                  | Unique identifier for the card                                                                                                                                                       | 1000058915                                                       |
| **customerId**          | string(20)   | Mandatory | Value copied from the request                                                        | Unique Identifier for a customer                                                                                                                                                     | IN2016201611                                                     |
| **availBal**            | Numeric(12)  | Mandatory | Card available balance                                                               | It is in implied decimals by two digits. Ex. if amount is INR 5.50, then send 550. If the amount is INR 3, then send 300                                                             | 19000                                                            |
| **cardStatus**          | String(2)    | Mandatory | Status of the card                                                                   | Active or Inactive                                                                                                                                                                   | Active                                                           |
| **profileId**           | Numeric(2)   | Mandatory | <p>Type of KYC</p><p>1 - Min KYC Profile<br>150 - Full KYC<br>200 – IKYC</p>         | KYC Profile should always be as per program                                                                                                                                          | 150                                                              |
| **kycName**             | String(100)  | Mandatory | Type of KYC based on Profile ID                                                      | This field will contain card Profile name (KYC/NON-KYC etc)                                                                                                                          | MIN\_KYC,FULL\_KYC,IKYC                                          |
| **cardNumber**          | string(100)  | Mandatory | Masked card number                                                                   | Card number will be in masked format                                                                                                                                                 | 479947\*\*\*\*7810                                               |
| **lastFourDigit**       | string(100)  | Mandatory | Last 4 digits of the card number                                                     | Last 4 digits of the card number                                                                                                                                                     | 7810                                                             |
| **entityName**          | string(100)  | Optional  | Name of the Entity where card belongs to                                             | Name of the specific entity/outlet                                                                                                                                                   | MG ROAD                                                          |
| **cardType**            | string(100)  | Optional  | Type of the card                                                                     | Whether it's a GPR card or the gift card                                                                                                                                             | Travel Card                                                      |
| **ovdFullName**         | String(200)  | Optional  | The name of the customer with BIN sponsor                                            | Customer name with BIN sponsor                                                                                                                                                       | Sourav Kumar                                                     |
| **panValid**            | boolean      | Mandatory | Pan is valid or not                                                                  | PAN is valid with NSDL or not                                                                                                                                                        | Y                                                                |
| **alternateEmail**      | String       | Optional  | Alternate email ID                                                                   | Secondary email ID                                                                                                                                                                   | ABC@gmail.com                                                    |

{% tabs %}
{% tab title="Curl" %}
```json
Sample Retrieve Cust Record API Request
https://pp-sandbox.wibmo.com/api/v2/customer/retrieveCustRecord
Sample Request
Encrypted req->
{
"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
// Sample token. Client will have to generate this token. 
Decrypted req->
{
    "messageCode": 1930,
    "clientTxnId": "Inquiry_V3_hAkjI/HThGQIkl7",
    "requestDateTime": "20221116114208",
    "urn": "389"
}
```
{% endtab %}

{% tab title="Response (Success)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
     "cardList": [
        {
            "lastName": "LastName",
            "panValid": false,
            "docList": [
                {
                    "docNumber": "ABC0123456",
                    "docType": "Passport"
                },
                {
                    "docNumber": "1234 5678 6015",
                    "docType": "Aadhar"
                },
                {
                    "docNumber": "YCV0123456",
                    "docType": "VoterId"
                },
                {
                    "docNumber": "ABCDE1234A",
                    "docType": "Pancard"
                },
                {
                    "docNumber": "DL60 20211234567",
                    "docType": "Driverlicense"
                }
            ],
            "cardType": "TRAVEL CARD",
            "mobile": "919897123456",
            "updatedOn": "16-Nov-2022",
            "kycName": "FULL_KYC",
            "createdOn": "16-Nov-2022",
            "availableBalance": 100000,
            "urn": 389,
            "firstName": "ABC",
            "lastFourDigit": "4216",
            "statusDescription": "Active",
            "entityName": "FintechA",
            "profileId": 150,
            "dob": "11-Jul-1993",
            "reKyc": false,
            "customerId": "custid_V3_juyWqcUUxz",
            "cardNumber": "179947 XXXXXX 4216",
            "cardStatus": 0,
            "email": "abc@xyz.com"
        }
    ],
    "bankId": 2010,
    "clientId": "WibmoClient",
    "responseDateTime": "20221116114243",
    "clientTxnId": "Inquiry_V3_hAkjI\/HThGQIkl7",
    "accosaTransactionId": 7441,
    "messageCode": 1931,
    "responseMessage": "SUCCESS",
    "responseCode": "00"
}
</code></pre>
{% endtab %}

{% tab title="Response (Failure)" %}
<pre class="language-json"><code class="lang-json">Encrypted Response->
<strong>{
</strong>"token":"Pl8F5kDZcvADIiursiAvvbHNuL9Wv5eaFdorGVFU6FKfIEnV/YskkzJlAov2ZHJWnqGNLOXfBq4SQqw8Ep4sK0gCAAkRXATCb1nSY6s=" 
}
//Sample token. Client will have to decrypt the token shared in the response body
Decrypted Response->
{
    "bankId": 0,
    "responseDateTime": "20221116120942",
    "accosaTransactionId": 0,
    "messageCode": 0,
    "responseMessage": "CUSTOMER DETAILS NOT PRESENT",
    "responseCode": "1303"
}
</code></pre>
{% endtab %}
{% endtabs %}

| 1501 | SYSTEM\_ERROR\_DB                                        |
| ---- | -------------------------------------------------------- |
| 1500 | SYSTEM\_ERROR\_UNKNOWN                                   |
| 1052 | SYSTEM\_ERROR                                            |
| 1303 | CUSTOMER\_DETAILS\_NOT\_PRESENT                          |
| 00   | SUCCESS                                                  |
| 1001 | \_CARD\_NOT\_FOUND                                       |
| 1307 | \_DUPLICATE\_EMAIL\_ID\_LINKED\_WITH\_MULTIPLE\_ACCOUNTS |
| 1237 | DUPLICATE\_PHONE\_NUMBER\_WITH\_MULTIPLE\_ACCOUNT        |
| 1055 | MALFORMED\_REQUEST                                       |
| 1302 | INVALID\_CUSTOMER                                        |
| 1263 | CUSTOMER\_ID\_NOT\_PRESENT                               |
| 1275 | INVALID\_CUSTOMER\_ID                                    |
| 1248 | INVALID\_JWT\_TOKEN                                      |
| 1031 | INVALID\_BANK\_ID                                        |
| 1093 | INVALID\_CLIENT\_TXN\_ID                                 |
| 1511 | ORIGINAL\_REQUEST\_MISSING                               |
| 1054 | DUPLICATE\_REQUEST                                       |
| 1503 | SYSTEM\_ERROR\_CACHE                                     |
|      | DUPLICATE\_STATUS\_OFFSET                                |
| 5000 | DUPLICATE\_STATUS                                        |
| 1510 | SYSTEM\_ERROR\_DROP\_REQ                                 |
| 1034 | INVALID\_MOBILE\_NUMBER                                  |
| 1092 | INVALID\_EMAIL\_ADDRESS                                  |
